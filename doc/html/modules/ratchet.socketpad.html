<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/ratchet.html">ratchet</a>
	</li>

	<li>
		<a href="../modules/ratchet.bus.html">ratchet.bus</a>
	</li>

	<li>
		<a href="../modules/ratchet.bus.transaction.html">ratchet.bus.transaction</a>
	</li>

	<li>
		<a href="../modules/ratchet.dns.html">ratchet.dns</a>
	</li>

	<li>
		<a href="../modules/ratchet.error.html">ratchet.error</a>
	</li>

	<li>
		<a href="../modules/ratchet.http.client.html">ratchet.http.client</a>
	</li>

	<li>
		<a href="../modules/ratchet.http.server.html">ratchet.http.server</a>
	</li>

	<li>
		<a href="../modules/ratchet.smtp.client.html">ratchet.smtp.client</a>
	</li>

	<li>
		<a href="../modules/ratchet.smtp.server.html">ratchet.smtp.server</a>
	</li>

	<li>
		<a href="../modules/ratchet.socket.html">ratchet.socket</a>
	</li>

	<li><strong>ratchet.socketpad</strong></li>
	
	<li>
		<a href="../modules/ratchet.ssl.html">ratchet.ssl</a>
	</li>

	<li>
		<a href="../modules/ratchet.ssl.session.html">ratchet.ssl.session</a>
	</li>

	<li>
		<a href="../modules/ratchet.thread.html">ratchet.thread</a>
	</li>

	<li>
		<a href="../modules/ratchet.timerfd.html">ratchet.timerfd</a>
	</li>

	<li>
		<a href="../modules/ratchet.zmqsocket.html">ratchet.zmqsocket</a>
	</li>

</ul>



<!-- File list -->






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>ratchet.socketpad</code></h1>

<p>The socketpad library provides a layer on top of the ratchet.socket library to manage buffered socket IO. This allows for more familiar usages and easier implementation of binary and ASCII socket protocols. These functions can fail, see error handling section in manual for details.</p>





<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#close">close</a>&nbsp;(self)</td>
	<td class="summary">Calls close() on the underlying socket, provided purely as convenience.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#new">new</a>&nbsp;(socket)</td>
	<td class="summary">Returns a new socketpad object, using the given socket as the underlying engine to send and receive buffered IO.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#peek">peek</a>&nbsp;(self)</td>
	<td class="summary">Peeks at the current, full contents of the socket buffer, without updating or changing them.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#recv">recv</a>&nbsp;(self, stop)</td>
	<td class="summary">Attempts to receive a specific amount of data from the socket, receiving packets on the underlying socket until the criteria is met.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#recv_remaining">recv_remaining</a>&nbsp;(self)</td>
	<td class="summary">Returns all remaining data in the socket buffer, without actually checking for new data.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#send">send</a>&nbsp;(self, data, more)</td>
	<td class="summary">Adds the given data to the send-buffer, and possibly flushes it to the underlying socket.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#update_and_peek">update_and_peek</a>&nbsp;(self)</td>
	<td class="summary">Calls for one single update of the socket buffer, and then returns the full contents of the buffer.</td>
	</tr>

</table>






<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="close"></a><strong>close</strong>&nbsp;(self)</dt>
<dd>
Calls close() on the underlying socket, provided purely as convenience.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the socket object.
	</li>
	
</ul>








</dd>




<dt><a name="new"></a><strong>new</strong>&nbsp;(socket)</dt>
<dd>
Returns a new socketpad object, using the given socket as the underlying engine to send and receive buffered IO. The socket object is available in raw form as the "socket" field of the returned socketpad object. A table for storing misc information related to the socketpad is available in the "data" field of the returned socketpad object.


<h3>Parameters</h3>
<ul>
	
	<li>
	  socket: A socket object to buffer.
	</li>
	
</ul>






<h3>Return value:</h3>
a new socketpad object.



</dd>




<dt><a name="peek"></a><strong>peek</strong>&nbsp;(self)</dt>
<dd>
Peeks at the current, full contents of the socket buffer, without updating or changing them.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the socketpad object.
	</li>
	
</ul>






<h3>Return value:</h3>
string of data currently in the socket buffer.



</dd>




<dt><a name="recv"></a><strong>recv</strong>&nbsp;(self, stop)</dt>
<dd>
Attempts to receive a specific amount of data from the socket, receiving packets on the underlying socket until the criteria is met.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the socketpad object.
	</li>
	
	<li>
	  stop: if given as a number, this method will attempt to receive that many bytes on the socket and return exactly that many. If given as a string, the socket will receive until that string is seen, everything up-to and including that string is returned.
	</li>
	
</ul>






<h3>Return value:</h3>
string of data received on the socket, or nil followed by an error message. If the first return is not nil, the second returned value will be true if only part of the requested data was received before the connection was remotely closed.



</dd>




<dt><a name="recv_remaining"></a><strong>recv_remaining</strong>&nbsp;(self)</dt>
<dd>
Returns all remaining data in the socket buffer, without actually checking for new data. This function empties the socket buffer. It is useful for checking for extra data that came along with previous calls to recv().


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the socketpad object.
	</li>
	
</ul>






<h3>Return value:</h3>
string of data cleared from the socket buffer.



</dd>




<dt><a name="send"></a><strong>send</strong>&nbsp;(self, data, more)</dt>
<dd>
Adds the given data to the send-buffer, and possibly flushes it to the underlying socket.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the socketpad object.
	</li>
	
	<li>
	  data: a string of data to send.
	</li>
	
	<li>
	  more: flag specifying more data will be buffered, so the send-buffer will not be flushed until this parameter is false.
	</li>
	
</ul>








</dd>




<dt><a name="update_and_peek"></a><strong>update_and_peek</strong>&nbsp;(self)</dt>
<dd>
Calls for one single update of the socket buffer, and then returns the full contents of the buffer. It is useful when you know new data is waiting on the socket but are not ready to do a full recv() on a criteria.


<h3>Parameters</h3>
<ul>
	
	<li>
	  self: the socketpad object.
	</li>
	
</ul>






<h3>Return value:</h3>
string of data in the socket buffer after a single update.



</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
